


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
	    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Using the Power Advantage Tool" href="../Ultra96-Power-Advantage-Tool-HW-SW/README.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Power Management
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Ultra96-Power-Advantage-Tool-HW-SW/README.html">Power Advantage Tool</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reading Aggregate Power</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-requirements">Hardware Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-by-step-walkthrough">Step-by-step Walkthrough</a></li>
</ul>
</li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/docs/Ultra96-Reading-Aggregate-Power/README.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Power Management</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using the Manhattan PMIC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/Ultra96-Reading-Aggregate-Power/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-manhattan-pmic">
<h1>Using the Manhattan PMIC<a class="headerlink" href="#using-the-manhattan-pmic" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This tutorial goes a little more in depth regarding the use of the I2C interface. In this tutorial, you can actually access important power consumption metrics without the use of the Power Advantage Tool GUI. The process involves directly communicating with the on-board Infineon measurement chip, the Manhattan PMIC, to extract measurements, including voltage, current draw, and overall power consumption of the Ultra96v2 board. Using this Manhattan PMIC (part number IR38060) is an alternative to the Power Advantage Tool, which utilizes the other onboard PMICs to gather relevant measurements. If you want to use the Manhattan PMIC and not the Power Advantage Tool, this is the tutorial for you!</p>
</div>
<div class="section" id="hardware-requirements">
<h2>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Ultra96v2 board</p>
<img alt="../../_images/image11.jpeg" src="../../_images/image11.jpeg" />
</li>
<li><p>Bus Pirate</p>
<img alt="../../_images/image21.jpeg" src="../../_images/image21.jpeg" />
</li>
<li><p>Three wires, where one side is a male header and the other side is a female header</p>
<img alt="Jumper Wires Premium 6&amp;quot; M/F Pack of 10 - PRT-09140 - SparkFun Electronics" src="../../_images/image31.jpeg" />
</li>
<li><p>USB to USB MINI-B cord</p>
<img alt="../../_images/image41.jpeg" src="../../_images/image41.jpeg" />
</li>
</ul>
</div>
<div class="section" id="step-by-step-walkthrough">
<h2>Step-by-step Walkthrough<a class="headerlink" href="#step-by-step-walkthrough" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These first few steps involve setting up the I2C for the Ultra96v2
board. The Power Advantage Tool included these steps, so if you have
already completed that tutorial you may skip to step 3.</p>
</div>
<ol class="arabic">
<li><p>To start, it is necessary to solder the three male headers of the separate wires to the I2C interface on the Ultra96v2 board. The soldering job is shown in the following figure. The left black wire is SCL, the middle white wire is SDA, and the right grey wire is GND.</p>
<img alt="Machine generated alternative text: -—rpst rpso R4S vps T'P4 cct RISO -RI-st RVCQ ors rpt." src="../../_images/image51.jpeg" />
</li>
<li><p>Next, connect the female headers of these wires to the bus pirate. The SCL wire connects to the <code class="docutils literal notranslate"><span class="pre">CLK</span></code> pin, the SDA wire connects to the <code class="docutils literal notranslate"><span class="pre">MOSI</span></code> pin, and the GND wire connects to the <code class="docutils literal notranslate"><span class="pre">GND</span></code> pin. This wiring is shown in the following figure. Once the wires are connected, connect the USB MINI-B port of the bus pirate to the USB port on the host computer using the USB MINI-B to USB cord. Do not forget to turn on your device!</p>
<img alt="../../_images/image21.jpeg" src="../../_images/image21.jpeg" />
</li>
<li><p>Now that you have successfully completed the hardware setup of the project, you can now move on to configuring the I2C communication with the Infineon measurement chip. First, make sure that you have TeraTerm downloaded (or equivalent). You can download TeraTerm download <a class="reference external" href="https://osdn.net/projects/ttssh2/releases/">here</a>.</p></li>
<li><p>With TeraTerm downloaded, open it and you should see the screen shown in the following figure. This screen is where you configure the COM port for the I2C communication. In this example, the COM port for I2C was located at Port 23. Select the <strong>Serial</strong> option and click <strong>OK</strong>.</p>
<img alt="../../_images/image61.png" src="../../_images/image61.png" />
</li>
<li><p>To correctly configure the Serial port for I2C, make some changes. Click on the <strong>Setup</strong> tab at the top of your TeraTerm window and navigate to the <strong>Serial port…</strong> option. Click on it.</p>
<img alt="../../_images/image71.png" src="../../_images/image71.png" />
</li>
<li><p>The one edit you will have to make is changing the Speed, or baud rate, of the connection. It will typically default to a baud rate of 9600, but for this instance we want a baud rate of 115200. The configuration for this is shown in the following figure. Once you make these edits, click <strong>New setting</strong>.</p>
<img alt="../../_images/image81.png" src="../../_images/image81.png" />
</li>
<li><p>Once you have completed the previous step, you might see a blank workspace. If this is the case, hit the <strong>Enter</strong> button on your keyboard. You should see a prompt that says “HiZ&gt;” or some other mode i.e. UART, SPI, I2C. This is shown in the following figure.</p>
<img alt="../../_images/image91.png" src="../../_images/image91.png" />
</li>
<li><p>Now we are ready to change the mode of the device. Type the letter <strong>m</strong> into the prompt and hit the <strong>Enter</strong> button. It should come up with the following dialog box.</p>
<img alt="../../_images/image101.png" src="../../_images/image101.png" />
</li>
<li><p>From the above dialog box, select I2C. Type <strong>4</strong> into the prompt and hit the “Enter” button. It should come up with the following prompt.</p>
<img alt="../../_images/image111.png" src="../../_images/image111.png" />
</li>
<li><p>Next, select the speed of the I2C communication. For this project, a speed of 400 KHz is desired, so type <strong>4</strong> into the prompt and hit the “Enter” button. It should come up with the following. Even if your mode was “I2C&gt;” in Step 9, Steps 9-12 are still necessary to ensure that the correct speed is selected for your interface.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image121.png" src="../../_images/image121.png" />
</div></blockquote>
<ol class="arabic" start="11">
<li><p>To search for available address spaces that are connected to your COM port, type <strong>(1)</strong> into the prompt and hit the <strong>Enter</strong> button. The available address spaces should be shown in the following figure.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Do not forget the parentheses as they are essential.</p>
</div>
<img alt="../../_images/image13.png" src="../../_images/image13.png" />
</li>
<li><p>If you want to check to see which address space correlates to the PMBus used to take measurements, type the following command: <strong>[0x8a 0x99 [ 0x8b r:3 ].</strong> This command is used to confirm the manufacturer ID of the device. The PMBus used in this example will return three bytes: 02 52 49. If you do not see these values returned, try looking at the other address spaces by entering the following commands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">0x86</span> <span class="pre">0x99</span> <span class="pre">[</span> <span class="pre">0x87</span> <span class="pre">r:3</span> <span class="pre">]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">0x88</span> <span class="pre">0x99</span> <span class="pre">[</span> <span class="pre">0x89</span> <span class="pre">r:3</span> <span class="pre">]</span></code></p></li>
</ul>
<p>The two commands above look at the manufacturer ID of the other address spaces. Whichever address space returns 02 52 49 is the one you want to use. The correct return values are shown in the following figure.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/image14.png" src="../../_images/image14.png" />
</div></blockquote>
<ol class="arabic" start="13">
<li><p>Next, gather readings for power. To do this, read both the voltage of the device as well as the current of the device. As a review, power, measured in watts, is equal to voltage, measured in volts, multiplied by current, measured in amps. So first, extract the voltage. To do this, enter the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="mh">0x8a</span> <span class="mh">0x8b</span> <span class="p">[</span> <span class="mh">0x8b</span> <span class="n">r</span><span class="p">:</span><span class="mi">2</span> <span class="p">]</span>
</pre></div>
</div>
<p>The result of entering this command is shown in the following figure.</p>
<img alt="../../_images/image15.png" src="../../_images/image15.png" />
<p>You will get <strong>0x0512</strong> as your word. It is read backwards, so the first byte you receive is the least significant byte and the second byte you receive is the most significant byte. Confusing, yes, but that is how it is formatted for the PMIC being used. Don’t forget this value!</p>
</li>
<li><p>Next, extract the current reading for your device. To do this, enter the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="mh">0x8a</span> <span class="mh">0x8c</span> <span class="p">[</span> <span class="mh">0x8b</span> <span class="n">r</span><span class="p">:</span><span class="mi">2</span> <span class="p">]</span>
</pre></div>
</div>
<p>The result of entering this command is shown in the following figure.</p>
<img alt="../../_images/image16.png" src="../../_images/image16.png" />
<p>You will get <strong>0xE009</strong> as your word. Like the voltage, it is read backwards, so the first byte is the LSB and the second byte is the MSB. Don’t forget this value!</p>
</li>
<li><p>Now that you have your readings, use a Linear Data Format that represents these hexadecimal values as decimal values. The Infineon part that you are using has a document that tells you how to convert from hex to decimal, and the formatting is shown in the following figure.</p>
<img alt="../../_images/image17.png" src="../../_images/image17.png" />
<p>From this description, you can see that any command run that reads voltage values uses 16-bit linear data format, while all other commands use 11-bit linear data format. Convert the values from hex to decimal:</p>
<p>For voltage, the 16-bit linear data format means that you take the hex value as an unsigned 16-bit value, convert that to unsigned decimal, and then multiply it by 2^(-8). This is according to the 16-bit linear data format shown above. Converting <strong>0x0512</strong> to binary, you get 0000010100010010, which as an unsigned decimal number is 1298. If you multiply 1298 by 2^(-8), the voltage is equal to <strong>5.0703125 V</strong>. This aligns with what is expect! The calculation is shown in the following figure.</p>
<img alt="../../_images/image18.png" src="../../_images/image18.png" />
</li>
<li><p>Next, take a look at current. Using the 11-bit linear data format now, convert your hex word to binary, and use the five MSBs as a signed decimal value that correlates to your exponent as well as use the 11 LSBs as a signed decimal value that correlates to your mantissa. Both of these values will use 2s complement for their notation. Then, plug these into the equation Y * 2^(N), where Y is the 11-bit mantissa and N is the 5-bit exponent. Converting <strong>0xE009</strong> to binary, you will get 1110000000001001. So, the 5 MSBs are 11100, which equals -4, and the 11 LSBs are 00000001001, which equals 9. Plugging these into our equation, you should get 9 * 2^(-4), which is equal to <strong>0.5625 A</strong>. The calculation is shown in the following figure.</p>
<img alt="../../_images/image19.png" src="../../_images/image19.png" />
</li>
<li><p>Now that you have your voltage and our current, you can determine your overall power. Multiplying <strong>5.0703125 V x 0.5625 A</strong> gives an overall power of <strong>2.852050781 W</strong>. The calculation is shown in the following figure.</p>
<img alt="../../_images/image20.png" src="../../_images/image20.png" />
</li>
<li><p>Now, if you wanted to see changed to this overall power reading, you can change the number of CPU cores that are enabled on your device. If you want to take it this far, you can access your board through JTAG/UART. If you have Petalinux running on your device, you can communicate directly with the device via PetaLinux commands, turning CPU cores off and on. To do this, let’s setup our COM port for JTAG/UART.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step assumes you have a working PetaLinux image burned on your SD card and you are booting your device in SD</p>
</div>
<p>mode.</p>
</li>
<li><p>First, it is necessary to open a separate COM port. In TeraTerm, if you want to do this, go to <strong>File</strong> → <strong>New connection</strong>. This step is shown in the following figure.</p>
<img alt="../../_images/image21.png" src="../../_images/image21.png" />
</li>
<li><p>You will be redirected to a page where you can select your new connection type. Select <strong>Serial</strong>, and select the USB Serial Port that matches your UART connection. In this example, this was COM4. Click <strong>OK</strong> when you are ready.</p>
<img alt="../../_images/image22.png" src="../../_images/image22.png" />
</li>
<li><p>Similar to last time when you set up the I2C COM port, you will have to change the baud rate for this COM port as well. To navigate there, go to <strong>Setup</strong>, and click on the <strong>Serial port</strong> option.</p>
<img alt="../../_images/image23.png" src="../../_images/image23.png" />
</li>
<li><p>Now you will see the interface where you can adjust the baud rate. Like the I2C COM port, set the baud rate to 115200. Other than this, no other changes should be necessary. The configuration should be like what is shown in the following figure.</p>
<img alt="../../_images/image24.png" src="../../_images/image24.png" />
</li>
<li><p>With the baud rate set, Petalinux should boot. If it does not boot immediately, reset your Ultra96v2 board by hitting the reset button on your board. PetaLinux will boot up, and it will look like what is shown in the following figure.</p>
<img alt="../../_images/image25.png" src="../../_images/image25.png" />
</li>
<li><p>Now, to edit your CPU core usage, type the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yes</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p>This will turn on one CPU core. Each core takes up 25% of the overall usage, so you should start at 0% and by typing this command once, your overall usage should jump to 25%. You can type this command up to four times, allowing you to set your CPU usage to 0%, 25%, 50%, 75%, and 100%.</p>
</li>
<li><p>If you want to see the usage of your CPU, type the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">top</span>
</pre></div>
</div>
<p>This top command will bring up a graphic showing your CPU usage, which can be seen at the top left of the graphic. The graphic looks like what is shown in the following figure. In this example here, you can see that the CPU usage is <strong>24.9%</strong>.</p>
<img alt="../../_images/image26.png" src="../../_images/image26.png" />
<p>It is important to note that opening up this graphic disallows you from sending more commands. If you want to return to the command line to continue entering commands, you will need to CTRL-C.</p>
</li>
<li><p>If you want to terminate your CPU cores and reset the overall usage
to 0%, type the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">killall</span> <span class="n">yes</span>
</pre></div>
</div>
<p>Use this if you want to reset usage so you can reconfigure the CPU cores.</p>
</li>
</ol>
<p>Now that you know how to change the CPU core usage, you can use this information to see how increasing CPU core usage will impact the overall power of the device. Play around with the CPUs, re-measuring your voltage and current readings as discussed in steps 15-19 and seeing how power changes with different core usage. Now that you know how to utilize the Manhattan PMIC on the Ultra96v2 board, you have completed this tutorial.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../Ultra96-Power-Advantage-Tool-HW-SW/README.html" class="btn btn-neutral float-left" title="Using the Power Advantage Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on April 8, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2022, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>